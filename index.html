<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
  
    <script>

		
      $(document).ready(function(){
        var $body = $('body');
        $body.html('');
        
        var index = streams.home.length - 1;
        var refreshPoint = 0;
        
        $("<h1>twittler <span id='news-feed'>news feed</span></h1>").prependTo($body);
        
        function formattedTime(time) {
        	var timeArray = time.toString().split(" ");
        	var date = timeArray.slice(0,4).join(" ");
        	var formatted = timeArray[4].split(":").slice(0,2).join(":");
        	return "On " + date + " at " + formatted;
        };
        	
        function loadTweets() {
        	while(index >= refreshPoint){
          		var tweet = streams.home[index];
          		var $tweet = $('<div class='+tweet.user+'></div>');
          		var formatted = formattedTime(tweet.created_at);
          		$tweet.text(': ' + tweet.message);
          		$('<span class="timestamp">'+formatted+'</span>').appendTo($tweet);
          		$('<span class="userName-'+tweet.user+'">@'+tweet.user+'</span>').prependTo($tweet);
          		$tweet.insertAfter("h1");
          		index -= 1;
        	}
        	index = streams.home.length - 1;
        	refreshPoint = index; 
        }
        
        loadTweets();
        
        var newTweet = $("<button>New Tweets</button>");
        newTweet.appendTo($body);
        
        
        $(".userName-mracus").on("click", function() {
        	$(".shawndrost").fadeToggle();
        	$(".sharksforcheap").fadeToggle();
        	$(".douglascalhoun").fadeToggle();
        });
        
        $("button").css({'color': 'white', 'background-color': '#4169E1',
        'border-radius': '5px', 'font-family': 'Tahoma, Geneva, sans-serif'});
        
        $("div").css({'font-family': 'Tahoma, Geneva, sans-serif', 'margin': '10px', 'border':
        '1px solid black','padding':'5px', 'border-radius':'5px'});
        
        $("h1").css({'display': 'inline','color': 'white', 'background-color': '#4169E1',
        'padding':'3px 0 3px 5px','border-radius':'5px'});
        
        $(".timestamp").css({'float':'right'});
        
        $("#news-feed").css({'display': 'inline','color': '#4169E1', 'background-color': 'white',
        'padding':'3px 0 3px 5px','border-radius':'5px'});
        
        $("button").on("click", loadTweets);
        
      });

    </script>
  </body>
</html>
